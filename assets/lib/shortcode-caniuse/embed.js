(function(){let b=(e,n)=>(n||document).querySelector(e),u=e=>document.querySelectorAll(e),[a,y,$,h,c,E]=["feature","past","future","theme","meta","observer"],[f,m]=[".ciu-embed","ciu-embed-iframe"],v=["style","display:block;width:100%;height:330px;border:none;border-radius:0;"],l="",d=new URL(import.meta.url);d.pathname.includes("/embed.js")&&(l=d.origin);let w=1,M=u(f);for(let e of M){let n=g(e);if(n){let t=S(e,n);o(e,E)==="true"&&I(e,t)}}window.addEventListener("message",L);function L(e){let n=T(e.data),{type:t,payload:s={}}=n;if(t==="ciu_embed"){let r=u(f);for(let i of r)if(s[a]===o(i,a)&&s[c]===o(i,c)){let p=b(`.${m}`,i);p&&(p.style.height=`${Math.ceil(s.height)}px`)}}}function I(e,n){if(typeof window.MutationObserver>"u")return;new MutationObserver(s=>{for(let r of s)if(r.type==="attributes"){let i=g(e);i&&(n.src=i)}}).observe(e,{attributes:!0})}function g(e){let n=o(e,a);if(!n)return"";let t=o(e,c);t||o(e,c,t=`${Date.now()}-${w++}`);let s=[y,$,h].map(r=>[r,o(e,r)]).filter(([,r])=>r).map(([r,i])=>`${r}=${i}`).join("&");return`${o(e,"origin")||l}/${n}#${c}=${t}${s?`&${s}`:""}`}function S(e,n){let t=document.createElement("iframe");return t.src=n,t.className=m,t.style.cssText=v[1],t.allow="fullscreen",e.appendChild(t),t}function o(e,...n){let t=`data-${n[0]}`;if(n.length===1)return e.getAttribute(t)||"";e.setAttribute(t,n[1])}function T(e){try{return typeof e=="string"?JSON.parse(e):e}catch{}return{}}})();
