(function(){let b=(e,n)=>(n||document).querySelector(e),l=e=>document.querySelectorAll(e),[a,h,y,$,c,E]=["feature","past","future","theme","meta","observer"],[m,d]=[".ciu-embed","ciu-embed-iframe"],v=["style","display:block;width:100%;height:330px;border:none;border-radius:0;"],u="",f=new URL(import.meta.url);f.pathname.includes("/embed.js")&&(f.protocol.includes("http")?u=f.origin:u="https://caniuse.pengzhanbo.cn");let w=1,M=l(m);for(let e of M){let n=p(e);if(n){let t=S(e,n);o(e,E)==="true"&&I(e,t)}}window.addEventListener("message",L);function L(e){let n=T(e.data),{type:t,payload:s={}}=n;if(t==="ciu_embed"){let r=l(m);for(let i of r)if(s[a]===o(i,a)&&s[c]===o(i,c)){let g=b(`.${d}`,i);g&&(g.style.height=`${Math.ceil(s.height)}px`)}}}function I(e,n){if(typeof window.MutationObserver>"u")return;new MutationObserver(s=>{for(let r of s)if(r.type==="attributes"){let i=p(e);i&&(n.src=i)}}).observe(e,{attributes:!0})}function p(e){let n=o(e,a);if(!n)return"";let t=o(e,c);t||o(e,c,t=`${Date.now()}-${w++}`);let s=[h,y,$].map(r=>[r,o(e,r)]).filter(([,r])=>r).map(([r,i])=>`${r}=${i}`).join("&");return`${o(e,"origin")||u}/${n}#${c}=${t}${s?`&${s}`:""}`}function S(e,n){let t=document.createElement("iframe");return t.src=n,t.className=d,t.style.cssText=v[1],t.allow="fullscreen",e.appendChild(t),t}function o(e,...n){let t=`data-${n[0]}`;if(n.length===1)return e.getAttribute(t)||"";e.setAttribute(t,n[1])}function T(e){try{return typeof e=="string"?JSON.parse(e):e}catch{}return{}}})();
