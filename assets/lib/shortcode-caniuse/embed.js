(function(){const a=(e,n)=>(n||document).querySelector(e),f=e=>document.querySelectorAll(e),[u,g,b,y,c,$]=["feature","past","future","theme","meta","observer"],[m,l]=[".ciu-embed","ciu-embed-iframe"],h=["style","display:block;width:100%;height:330px;border:none;border-radius:0;"],E=L();let v=1;const w=f(m);for(const e of w){const n=d(e);if(n){const t=T(e,n);o(e,$)==="true"&&S(e,t)}}window.addEventListener("message",M);function M(e){const n=j(e.data),{type:t,payload:r={}}=n;if(t==="ciu_embed"){const s=f(m);for(const i of s)if(r[u]===o(i,u)&&r[c]===o(i,c)){const p=a(`.${l}`,i);p&&(p.style.height=`${Math.ceil(r.height)}px`)}}}function S(e,n){if(typeof window.MutationObserver>"u")return;new MutationObserver(r=>{for(const s of r)if(s.type==="attributes"){const i=d(e);i&&(n.src=i)}}).observe(e,{attributes:!0})}function L(){const e=['script[src*="caniuse"][src*="/embed.js"]','script[src*="/embed.js"]'],n=document.currentScript||a(e[0])||a(e[1]);if(n){const t=n.src;if(console.log(t),t){const r=new URL(t);if(r.pathname.includes("/embed.js"))return r.origin}return"https://caniuse.pengzhanbo.cn"}return""}function d(e){const n=o(e,u);if(!n)return"";let t=o(e,c);t||o(e,c,t=`${Date.now()}-${v++}`);const r=[g,b,y].map(s=>[s,o(e,s)]).filter(([,s])=>s).map(([s,i])=>`${s}=${i}`).join("&");return`${o(e,"origin")||E}/${n}#${c}=${t}${r?`&${r}`:""}`}function T(e,n){const t=document.createElement("iframe");return t.src=n,t.className=l,t.style.cssText=h[1],t.allow="fullscreen",e.appendChild(t),t}function o(e,...n){const t=`data-${n[0]}`;if(n.length===1)return e.getAttribute(t)||"";e.setAttribute(t,n[1])}function j(e){try{return typeof e=="string"?JSON.parse(e):e}catch{}return{}}})();